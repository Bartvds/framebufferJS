!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.lorez=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
"use strict";var RGBA=_dereq_("./RGBA"),microFont=_dereq_("../font/Micro"),util=_dereq_("./util"),clamp=util.clamp,alpha=new RGBA(0,0,0,0),black=new RGBA(0,0,0),magenta=new RGBA(255,0,255),Bitmap=function(){function t(t,h,i,a){if("undefined"==typeof i&&(i=!1),"undefined"==typeof a&&(a=null),this.width=t,this.height=h,this.useAlpha=i,this.channels=i?4:3,a){var r=this.width*this.height*this.channels;if(a.byteLength!==r)throw new Error("bad raw data dimensions; expected "+r+", received "+a.byteLength);this.buffer=a,this.data=new Uint8ClampedArray(this.buffer)}else this._resetData()}return t.prototype._resetData=function(){this.buffer=new ArrayBuffer(this.width*this.height*this.channels),this.data=new Uint8ClampedArray(this.buffer)},t.prototype.resizeTo=function(t,h){(t!==this.width||h!==this.height)&&(this.width=t,this.height=h,this._resetData())},t.prototype.setPixel=function(t,h,i){if(t=Math.floor(t),h=Math.floor(h),!(0>t||0>h||t>=this.width||h>=this.height)){var a=(t+h*this.width)*this.channels;this.data[a]=i.r,this.data[a+1]=i.g,this.data[a+2]=i.b}},t.prototype.getPixel=function(t,h,i){if(t=Math.floor(t),h=Math.floor(h),0>t||0>h||t>=this.width||h>=this.height)return null;i=i||new RGBA;var a=(t+h*this.width)*this.channels;return i.r=this.data[a],i.g=this.data[a+1],i.b=this.data[a+2],i},t.prototype.fillRect=function(t,h,i,a,r){t=Math.floor(t),h=Math.floor(h),i=Math.floor(i),a=Math.floor(a);for(var s=h;h+a>s;s++)for(var e=t;t+i>e;e++)if(!(0>e||0>s||e>=this.width||s>=this.height)){var o=(e+s*this.width)*this.channels;this.data[o]=r.r,this.data[o+1]=r.g,this.data[o+2]=r.b}},t.prototype.drawLineH=function(t,h,i,a){var r=clamp(Math.floor(t+i),0,this.width);for(t=clamp(Math.floor(t),0,this.width),h=clamp(Math.floor(h),0,this.height);r>t;t++){var s=(t+h*this.width)*this.channels;this.data[s]=a.r,this.data[s+1]=a.g,this.data[s+2]=a.b}},t.prototype.drawLineV=function(t,h,i,a){var r=clamp(Math.floor(h+i),0,this.height);for(t=clamp(Math.floor(t),0,this.width),h=clamp(Math.floor(h),0,this.height);r>h;h++){var s=(t+h*this.width)*this.channels;this.data[s]=a.r,this.data[s+1]=a.g,this.data[s+2]=a.b}},t.prototype.drawRect=function(t,h,i,a,r){t=Math.floor(t),h=Math.floor(h),i=Math.floor(i),a=Math.floor(a),this.drawLineH(t,h,i,r),this.drawLineH(t,h+a-1,i,r),this.drawLineV(t,h,a,r),this.drawLineV(t+i-1,h,a,r)},t.prototype.fillCircle=function(t,h,i,a){t=Math.floor(t),h=Math.floor(h),i=Math.floor(i);for(var r=-i;i>=r;r++)for(var s=-i;i>=s;s++)if(!(0>t+s||0>h+r||t+s>=this.width||h+r>=this.height)&&i*i>=s*s+r*r){var e=(t+s+(h+r)*this.width)*this.channels;this.data[e]=a.r,this.data[e+1]=a.g,this.data[e+2]=a.b}},t.prototype.drawCircle=function(t,h,i,a){t=Math.floor(t),h=Math.floor(h),i=Math.floor(i);for(var r=0;360>r;r++){var s=Math.round(Math.cos(r*(Math.PI/180))*i)+t,e=Math.round(Math.sin(r*(Math.PI/180))*i)+h;if(!(0>s||0>e||s>=this.width||e>=this.height)){var o=(s+e*this.width)*this.channels;this.data[o]=a.r,this.data[o+1]=a.g,this.data[o+2]=a.b}}},t.prototype.shader=function(t){var h,i,a,r,s=new RGBA;for(h=0;h<this.height;h++)for(i=0;i<this.width;i++)a=(i+h*this.width)*this.channels,s.r=this.data[a],s.g=this.data[a+1],s.b=this.data[a+2],r=t(i,h,s),this.data[a]=r.r,this.data[a+1]=r.g,this.data[a+2]=r.b},t.prototype.text=function(t,h,i,a){i=String(i);for(var r=0;r<i.length;r++)t+=this.drawChar(t,h,i.charAt(r),a)+1},t.prototype.drawChar=function(t,h,i,a){var r=microFont.chars[i.toUpperCase()];if(!r)return 0;for(var s=0;s<microFont.height;s++)for(var e=0;e<r.width;e++)r.map[s*r.width+e]&&this.setPixel(t+e,h+s,a);return r.width},t.prototype.blit=function(t,h,i){h=h?Math.floor(h):0,i=i?Math.floor(i):0;var a,r,s,e;if(!(h>=this.width||i>=this.height||h+t.width<0||i+t.height<0)){var o=h,d=h+t.width,n=i,f=i+t.height;if(0>o&&(o=0),0>n&&(n=0),d>=this.width&&(d=this.width),f>=this.height&&(f=this.height),t.useAlpha)for(a=n;f>a;a++)for(r=o;d>r;r++){s=(r-h+(a-i)*t.width)*t.channels,e=(r+a*this.width)*this.channels;var l=t.data[s+3]/255,c=1-l;this.data[e]=Math.round(this.data[e]*c+t.data[s]*l),this.data[e+1]=Math.round(this.data[e+1]*c+t.data[s+1]*l),this.data[e+2]=Math.round(this.data[e+2]*c+t.data[s+2]*l)}else for(a=n;f>a;a++)for(r=o;d>r;r++)s=(r-h+(a-i)*t.width)*t.channels,e=(r+a*this.width)*this.channels,this.data[e]=t.data[s],this.data[e+1]=t.data[s+1],this.data[e+2]=t.data[s+2]}},t.prototype.clear=function(t){t=t||black;var h,i;if(this.useAlpha)for(h=this.width*this.height*4,i=0;h>i;i+=4)this.data[i]=t.r,this.data[i+1]=t.g,this.data[i+2]=t.b,this.data[i+3]=t.a;else for(h=this.width*this.height*3,i=0;h>i;i+=3)this.data[i]=t.r,this.data[i+1]=t.g,this.data[i+2]=t.b},t.prototype.clearAlpha=function(t){if("undefined"==typeof t&&(t=0),this.useAlpha)for(var h=this.width*this.height*4,i=3;h>i;i+=4)this.data[i]=t},t.clipFromData=function(h,i,a,r,s,e,o,d,n){var f,l,c,w,p=n?4:3,u=new Uint8Array(d*o*p);if(n)for(f=0;d>f;f++)for(l=0;o>l;l++)c=(l+s+(f+e)*i)*r,w=(l+f*o)*p,u[w]=h[c],u[w+1]=h[c+1],u[w+2]=h[c+2],u[w+3]=h[c+3];else for(f=0;d>f;f++)for(l=0;o>l;l++)c=(l+s+(f+e)*i)*r,w=(l+f*o)*p,u[w]=h[c],u[w+1]=h[c+1],u[w+2]=h[c+2];return new t(o,d,n,u)},t}();module.exports=Bitmap;
},{"../font/Micro":15,"./RGBA":6,"./util":13}],2:[function(_dereq_,module,exports){
"use strict";var Char=function(){function t(t,h){this.char=t,this.width=h[0].length,this.map=[];for(var r=0;r<h.length;r++)for(var a=h[r],i=0;i<a.length;i++)this.map.push("1"===a.charAt(i))}return t}();module.exports=Char;
},{}],3:[function(_dereq_,module,exports){
"use strict";var FPS=function(){function t(t,e){"undefined"==typeof t&&(t=30),"undefined"==typeof e&&(e=2),this.tickHistory=[0],this.deltaHistory=[0],this.tickI=0,this.deltaI=0,this.smoothFPS=t,this.smoothDelta=e,this.previous=performance.now()}return t.prototype.begin=function(){var t=performance.now(),e=t-this.previous;this.tickHistory[this.tickI%this.smoothFPS]=e,this.tickI++,this.previous=t},t.prototype.end=function(){var t=performance.now(),e=t-this.previous;this.deltaHistory[this.deltaI%this.smoothDelta]=e,this.deltaI++},Object.defineProperty(t.prototype,"fps",{get:function(){for(var t=0,e=0;e<this.tickHistory.length;e++)t+=this.tickHistory[e];return Math.ceil(1e3/(t/this.tickHistory.length))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redraw",{get:function(){for(var t=0,e=0;e<this.deltaHistory.length;e++)t+=this.deltaHistory[e];return Math.ceil(t/this.deltaHistory.length)},enumerable:!0,configurable:!0}),t}();module.exports=FPS;
},{}],4:[function(_dereq_,module,exports){
"use strict";var Char=_dereq_("./Char"),Font=function(){function t(t,r,e){var h=this;this.name=t,this.height=r,this.chars=Object.create(null),Object.keys(e).forEach(function(t){h.chars[t]=new Char(t,e[t])})}return t}();module.exports=Font;
},{"./Char":2}],5:[function(_dereq_,module,exports){
"use strict";var HSV=function(){function e(e,t,n){"undefined"==typeof e&&(e=0),"undefined"==typeof t&&(t=0),"undefined"==typeof n&&(n=0),this.h=e,this.s=t,this.v=n}return e}();module.exports=HSV;
},{}],6:[function(_dereq_,module,exports){
"use strict";var RGBA=function(){function e(e,t,n,i){"undefined"==typeof e&&(e=0),"undefined"==typeof t&&(t=0),"undefined"==typeof n&&(n=0),"undefined"==typeof i&&(i=255),this.r=e,this.g=t,this.b=n,this.a=i}return e}();module.exports=RGBA;
},{}],7:[function(_dereq_,module,exports){
"use strict";var SpriteSheet=function(){function t(t,e){this.sprites=[],this.width=t,this.height=e}return t.prototype.getSprite=function(t,e){return this.getSpriteAt(e*this.width+t)},t.prototype.getSpriteAt=function(t){if(0===this.sprites.length)throw new Error("sheet has zero images");return this.sprites[t%this.sprites.length]},t.prototype.addSprite=function(t){this.sprites.push(t)},t}();module.exports=SpriteSheet;
},{}],8:[function(_dereq_,module,exports){
"use strict";var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},Bitmap=_dereq_("./Bitmap"),CanvasRenderer=_dereq_("./../render/CanvasRenderer"),WebGLRenderer=_dereq_("./../render/WebGLRenderer"),autosize=_dereq_("./autosize"),Stage=function(e){function t(t){if(e.call(this,t.width||32,t.height||32,!1),this.canvas="string"==typeof t.canvas?document.getElementById(t.canvas):t.canvas,!this.canvas)throw new Error('cannot locate canvas with id "'+t.canvas+'"');if(this.clear(),"canvas"!==t.renderer)try{this.renderer=new WebGLRenderer(this,this.canvas)}catch(r){console.log(r),console.log("render init error, switching to fallback")}this.renderer||(this.renderer=new CanvasRenderer(this,this.canvas)),this.autoSize=new autosize.AutoSize(this,{center:t.center,scale:t.scale})}return __extends(t,e),t.prototype.resizeTo=function(t,r){(t!==this.width||r!==this.height)&&(e.prototype.resizeTo.call(this,t,r),this.autoSize.update())},t.prototype.render=function(){this.renderer.update()},t.prototype.destruct=function(){this.autoSize.stop(),this.autoSize=null,this.renderer.destruct(),this.renderer=null,this.canvas=null},t}(Bitmap);module.exports=Stage;
},{"./../render/CanvasRenderer":25,"./../render/WebGLRenderer":26,"./Bitmap":1,"./autosize":9}],9:[function(_dereq_,module,exports){
"use strict";function assertMode(e){if(!("number"==typeof e&&e>0||"max"===e||"fit"===e||"none"===e)){var t=parseInt(e,10);if(isNaN(t)||!(t>0))throw new Error("bad scaleMode: "+e)}}var browser=_dereq_("./browser"),AutoSize=function(){function e(e,t){var s=this;this.stage=e,t=t||{},this.centerView=!!t.center,this.scaleMode=t.scale||"none",assertMode(this.scaleMode),e.canvas.style.position="absolute",this.update=function(){var e=browser.getViewport();"fit"===s.scaleMode?s.scaleFit(e):"max"===s.scaleMode?s.scaleAspect(e):s.stage.renderer.resize(),s.centerView||"max"===s.scaleMode?s.moveScreenCenter(e):s.moveScreenTo(0,0)},this.setMode(this.scaleMode,this.centerView)}return e.prototype.scale=function(e){this.setMode(e,this.centerView)},e.prototype.center=function(e){"undefined"==typeof e&&(e=!0),this.setMode(this.scaleMode,e)},e.prototype.resize=function(){this.update()},e.prototype.stop=function(){this.unlisten()},e.prototype.scaleTo=function(e,t){this.scaleMode="none",this.stage.canvas.width=e,this.stage.canvas.height=t,this.stage.renderer.resize()},e.prototype.scaleFit=function(e){this.stage.canvas.width=e.width,this.stage.canvas.height=e.height,this.stage.renderer.resize()},e.prototype.scaleAspect=function(e){var t=Math.min(e.width/this.stage.width,e.height/this.stage.height);this.stage.canvas.width=Math.floor(this.stage.width*t),this.stage.canvas.height=Math.floor(this.stage.height*t),this.stage.renderer.resize()},e.prototype.moveScreenTo=function(e,t){this.stage.canvas.style.left=e+"px",this.stage.canvas.style.top=t+"px"},e.prototype.moveScreenCenter=function(e){this.moveScreenTo(Math.floor((e.width-this.stage.canvas.width)/2),Math.floor((e.height-this.stage.canvas.height)/2))},e.prototype.listen=function(){this.unlisten(),(this.centerView||"fit"===this.scaleMode)&&window.addEventListener("resize",this.update)},e.prototype.unlisten=function(){window.removeEventListener("resize",this.update)},e.prototype.setMode=function(e,t){assertMode(e),this.scaleMode=e;var s=parseInt(this.scaleMode,10);isNaN(s)||(this.scaleMode=s,this.scaleTo(Math.floor(this.stage.width*s),Math.floor(this.stage.height*s)),this.unlisten()),"fit"===this.scaleMode&&this.moveScreenTo(0,0),(t||"fit"===this.scaleMode||"max"===this.scaleMode)&&this.listen(),this.update()},e}();exports.AutoSize=AutoSize;
},{"./browser":10}],10:[function(_dereq_,module,exports){
"use strict";function getViewport(){var t=window,e="inner";return"innerWidth"in window||(e="client",t=document.documentElement||document.body),{width:t[e+"Width"],height:t[e+"Height"]}}exports.getViewport=getViewport;
},{}],11:[function(_dereq_,module,exports){
"use strict";function hsv2rgb(r){var a,t,h,n,e,u,M,s,o=r.h,b=r.s,i=r.v;if(o=Math.max(0,Math.min(360,o)),b=Math.max(0,Math.min(100,b)),i=Math.max(0,Math.min(100,i)),b/=100,i/=100,0===b)return a=t=h=i,new RGBA(Math.round(255*a),Math.round(255*t),Math.round(255*h));switch(o/=60,n=Math.floor(o),e=o-n,u=i*(1-b),M=i*(1-b*e),s=i*(1-b*(1-e)),n){case 0:a=i,t=s,h=u;break;case 1:a=M,t=i,h=u;break;case 2:a=u,t=i,h=s;break;case 3:a=u,t=M,h=i;break;case 4:a=s,t=u,h=i;break;default:a=i,t=u,h=M}return new RGBA(Math.round(255*a),Math.round(255*t),Math.round(255*h))}function rgb2hsv(r){var a,t,h,n,e,u=r.r/255,M=r.g/255,s=r.b/255,o=Math.max(u,M,s),b=o-Math.min(u,M,s),i=function(r){return(o-r)/6/b+.5};return 0===b?n=e=0:(e=b/o,a=i(u),t=i(M),h=i(s),u===o?n=h-t:M===o?n=1/3+a-h:s===o&&(n=2/3+t-a),0>n?n+=1:n>1&&(n-=1)),new HSV(Math.round(360*n),Math.round(100*e),Math.round(100*o))}var RGBA=_dereq_("./RGBA"),HSV=_dereq_("./HSV");exports.hsv2rgb=hsv2rgb,exports.rgb2hsv=rgb2hsv;
},{"./HSV":5,"./RGBA":6}],12:[function(_dereq_,module,exports){
"use strict";function interval(n,t){function e(){if(r){i++;var t=performance.now();n(i,t-o),o=t}}var r=0,i=0,o=performance.now(),a={};return a.start=function(){r&&clearInterval(r),r=setInterval(e,1e3/t)},a.step=function(){e()},a.stop=function(){r&&(clearInterval(r),r=0)},a.isRunning=function(){return!!r},a}function request(n){function t(){if(r){i++;var e=performance.now();n(i,e-o),o=e,requestAnimationFrame(t)}}var e,r=!1,i=0,o=performance.now(),a={};return a.start=function(){r||(r=!0,e=requestAnimationFrame(t))},a.step=function(){t()},a.stop=function(){r&&(r=!1,cancelAnimationFrame(e))},a.isRunning=function(){return r},a}exports.interval=interval,exports.request=request;
},{}],13:[function(_dereq_,module,exports){
"use strict";function rand(r){return Math.floor(Math.random()*r)}function clamp(r,n,t){return n>r?n:r>t?t:r}exports.rand=rand,exports.clamp=clamp;
},{}],14:[function(_dereq_,module,exports){
var PerlinNoise=function(){function t(){this.permutation=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],this.p=new Array(512);for(var t=0;256>t;t++)this.p[256+t]=this.p[t]=this.permutation[t]}return t.prototype.noise=function(t,r,i){var h=255&Math.floor(t),s=255&Math.floor(r),p=255&Math.floor(i);t-=Math.floor(t),r-=Math.floor(r),i-=Math.floor(i);var o=this.fade(t),e=this.fade(r),a=this.fade(i),n=this.p[h]+s,l=this.p[n]+p,f=this.p[n+1]+p,u=this.p[h+1]+s,d=this.p[u]+p,c=this.p[u+1]+p;return this.scale(this.lerp(a,this.lerp(e,this.lerp(o,this.grad(this.p[l],t,r,i),this.grad(this.p[d],t-1,r,i)),this.lerp(o,this.grad(this.p[f],t,r-1,i),this.grad(this.p[c],t-1,r-1,i))),this.lerp(e,this.lerp(o,this.grad(this.p[l+1],t,r,i-1),this.grad(this.p[d+1],t-1,r,i-1)),this.lerp(o,this.grad(this.p[f+1],t,r-1,i-1),this.grad(this.p[c+1],t-1,r-1,i-1)))))},t.prototype.fade=function(t){return t*t*t*(t*(6*t-15)+10)},t.prototype.lerp=function(t,r,i){return r+t*(i-r)},t.prototype.grad=function(t,r,i,h){var s=15&t,p=8>s?r:i,o=4>s?i:12==s||14==s?r:h;return(0==(1&s)?p:-p)+(0==(2&s)?o:-o)},t.prototype.scale=function(t){return(1+t)/2},t}();module.exports=PerlinNoise;
},{}],15:[function(_dereq_,module,exports){
"use strict";var Font=_dereq_("../core/Font"),font=new Font("micro",4,{0:["111","101","101","111"],1:["01","11","01","01"],2:["110","001","010","111"],3:["111","011","001","111"],4:["100","101","111","010"],5:["111","100","111","011"],6:["100","111","101","111"],7:["111","001","010","010"],8:["111","101","111","111"],9:["111","101","111","001"],A:["111","101","111","101"],B:["100","111","101","111"],C:["111","100","100","111"],D:["110","101","101","110"],E:["111","110","100","111"],F:["111","100","110","100"],G:["111","100","101","111"],H:["101","101","111","101"],I:["1","1","1","1"],J:["001","001","101","111"],K:["101","110","101","101"],L:["10","10","10","11"],M:["11011","11011","10101","10001"],N:["1001","1101","1011","1001"],O:["111","101","101","111"],P:["111","101","111","100"],Q:["111","101","111","001"],R:["111","101","100","100"],S:["111","100","111","011"],T:["111","010","010","010"],U:["101","101","101","111"],V:["101","101","101","010"],W:["10001","10001","10101","01110"],X:["101","010","010","101"],Y:["101","101","010","010"],Z:["111","011","100","111"]," ":["0","0","0","0"],"!":["1","1","0","1"],"?":["111","001","000","010"],".":["0","0","0","1"],",":["0","0","1","1"],"+":["000","010","111","010"],"-":["00","00","11","00"],"=":["000","111","000","111"],"*":["000","101","010","101"],_:["000","000","000","111"],"[":["11","10","10","11"],"]":["11","01","01","11"],"(":["01","10","10","01"],")":["10","01","01","10"],"<":["00","01","10","01"],">":["00","10","01","10"],"'":["1","1","0","0"],'"':["101","101","000","000"],"`":["10","01","00","00"],"~":["000","110","011","000"],"/":["001","010","010","100"],"\\":["100","010","010","001"]});module.exports=font;
},{"../core/Font":4}],16:[function(_dereq_,module,exports){
"use strict";function rgb(r,e,o){return new RGBA(r,e,o)}function hsv(r,e,o){return hsvTmp.h=r,hsvTmp.s=e,hsvTmp.v=o,exports.hsv2rgb(hsvTmp)}var Stage=_dereq_("./core/Stage");exports.Stage=Stage;var Bitmap=_dereq_("./core/Bitmap");exports.Bitmap=Bitmap;var FPS=_dereq_("./core/FPS");exports.FPS=FPS;var RGBA=_dereq_("./core/RGBA"),HSV=_dereq_("./core/HSV"),PerlinNoise=_dereq_("./extra/PerlinNoise");exports.PerlinNoise=PerlinNoise;var loader=_dereq_("./loaders/loader");exports.loader=loader;var _util=_dereq_("./core/util"),rand=_util.rand;exports.rand=rand;var _color=_dereq_("./core/color"),rgb2hsv=_color.rgb2hsv;exports.rgb2hsv=rgb2hsv;var hsv2rgb=_color.hsv2rgb;exports.hsv2rgb=hsv2rgb;var ticker=_dereq_("./core/ticker");exports.ticker=ticker,exports.rgb=rgb;var hsvTmp=new HSV;exports.hsv=hsv,[exports.loader,exports.PerlinNoise,_util,_color,exports.ticker,RGBA,HSV,exports.Bitmap,exports.FPS,exports.Stage];
},{"./core/Bitmap":1,"./core/FPS":3,"./core/HSV":5,"./core/RGBA":6,"./core/Stage":8,"./core/color":11,"./core/ticker":12,"./core/util":13,"./extra/PerlinNoise":14,"./loaders/loader":24}],17:[function(_dereq_,module,exports){
"use strict";var Bitmap=_dereq_("../core/Bitmap"),ImageDataLoader=_dereq_("./ImageDataLoader"),BitmapLoader=function(){function a(a,t){"undefined"==typeof t&&(t=!1),this.url=a,this.useAlpha=t}return a.prototype.load=function(a){var t=this;new ImageDataLoader(this.url).load(function(e,i){if(e)return void a(e,null);if(t.useAlpha)a(null,new Bitmap(i.width,i.height,!0,i.data.buffer));else{for(var r=new Bitmap(i.width,i.height,!1),o=i.data,d=i.width,u=0;u<i.height;u++)for(var n=0;d>n;n++){var h=4*(u*d+n),l=3*(u*d+n);r.data[l]=o[h],r.data[l+1]=o[h+1],r.data[l+2]=o[h+2]}a(null,r)}})},a}();module.exports=BitmapLoader;
},{"../core/Bitmap":1,"./ImageDataLoader":18}],18:[function(_dereq_,module,exports){
"use strict";var ImageDataLoader=function(){function t(t){this.url=t}return t.prototype.load=function(t){var n=this,e=document.createElement("img");e.onload=function(){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var o=n.getContext("2d");o.drawImage(e,0,0),t(null,o.getImageData(0,0,e.width,e.height)),e.onload=null,e.onerror=null},e.onerror=function(){t(new Error("cannot load "+n.url),null),e.onload=null,e.onerror=null},e.src=this.url},t}();module.exports=ImageDataLoader;
},{}],19:[function(_dereq_,module,exports){
"use strict";var TextLoader=_dereq_("./TextLoader"),JSONLoader=function(){function r(r){this.url=r}return r.prototype.load=function(r){new TextLoader(this.url).load(function(e,t){if(e)return void r(e,null);try{var o=JSON.parse(t)}catch(n){r(n,null)}r(null,o)})},r}();module.exports=JSONLoader;
},{"./TextLoader":23}],20:[function(_dereq_,module,exports){
"use strict";var MultiLoader=function(){function u(u){var e=this;this.queued=[],u&&u.forEach(function(u){e.queued.push(u)})}return u.prototype.load=function(u){var e=this,n=!1,o=new Array(this.queued.length);this.queued.forEach(function(r,t){r.load(function(i,l){if(!n){if(i)return console.log(r.url),console.error(i),u(i,null),void(n=!0);o[t]=l,e.queued[t]=null,e.queued.every(function(u){return!u})&&(u(i,o),e.queued=null)}})})},u}();module.exports=MultiLoader;
},{}],21:[function(_dereq_,module,exports){
"use strict";function getURL(e,r){urlExp.lastIndex=0;var t=urlExp.exec(e);return t[1]+t[2]+r}var JSONLoader=_dereq_("./JSONLoader"),SpriteSheetLoader=_dereq_("./SpriteSheetLoader"),urlExp=/^(.*?)(\/?)([^\/]+?)$/,SpriteSheetJSONLoader=function(){function e(e,r){"undefined"==typeof r&&(r=!1),this.url=e,this.useAlpha=r}return e.prototype.load=function(e){var r=this;new JSONLoader(this.url).load(function(t,o){return t?void e(t,null):(console.log(o),void new SpriteSheetLoader(getURL(r.url,o.image),o,r.useAlpha).load(e))})},e}();module.exports=SpriteSheetJSONLoader;
},{"./JSONLoader":19,"./SpriteSheetLoader":22}],22:[function(_dereq_,module,exports){
"use strict";var Bitmap=_dereq_("../core/Bitmap"),SpriteSheet=_dereq_("../core/SpriteSheet"),ImageDataLoader=_dereq_("./ImageDataLoader"),SpriteSheetLoader=function(){function e(e,t,r){"undefined"==typeof r&&(r=!1),this.url=e,this.opts=t,this.useAlpha=r}return e.prototype.load=function(e){var t=this;new ImageDataLoader(this.url).load(function(r,i){if(r)return void e(r,null);for(var o=t.opts.outerMargin||0,a=t.opts.innerMargin||0,s=new SpriteSheet(t.opts.spritesX,t.opts.spritesY),p=0;p<t.opts.spritesY;p++)for(var n=0;n<t.opts.spritesX;n++){var u=o+n*(t.opts.sizeX+a),d=o+p*(t.opts.sizeY+a);s.addSprite(Bitmap.clipFromData(i.data,i.width,i.height,4,u,d,t.opts.sizeX,t.opts.sizeY,t.useAlpha))}e(null,s)})},e}();module.exports=SpriteSheetLoader;
},{"../core/Bitmap":1,"../core/SpriteSheet":7,"./ImageDataLoader":18}],23:[function(_dereq_,module,exports){
"use strict";function getXHR(){if(XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}throw new Error("This browser does not support XMLHttpRequest.")}var TextLoader=function(){function t(t){this.url=t}return t.prototype.load=function(t){try{var e=getXHR()}catch(r){return void t(r,null)}e.onreadystatechange=function(){4===e.readyState&&t(null,e.responseText)},e.open("GET",this.url,!0),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.send(null)},t}();module.exports=TextLoader;
},{}],24:[function(_dereq_,module,exports){
var ImageDataLoader=_dereq_("./ImageDataLoader");exports.ImageDataLoader=ImageDataLoader;var BitmapLoader=_dereq_("./BitmapLoader");exports.BitmapLoader=BitmapLoader;var TextLoader=_dereq_("./TextLoader");exports.TextLoader=TextLoader;var JSONLoader=_dereq_("./JSONLoader");exports.JSONLoader=JSONLoader;var SpriteSheetLoader=_dereq_("./SpriteSheetLoader");exports.SpriteSheetLoader=SpriteSheetLoader;var SpriteSheetJSONLoader=_dereq_("./SpriteSheetJSONLoader");exports.SpriteSheetJSONLoader=SpriteSheetJSONLoader;var MultiLoader=_dereq_("./MultiLoader");exports.MultiLoader=MultiLoader,[exports.MultiLoader,exports.ImageDataLoader,exports.BitmapLoader,exports.TextLoader,exports.JSONLoader,exports.SpriteSheetLoader,exports.SpriteSheetJSONLoader];
},{"./BitmapLoader":17,"./ImageDataLoader":18,"./JSONLoader":19,"./MultiLoader":20,"./SpriteSheetJSONLoader":21,"./SpriteSheetLoader":22,"./TextLoader":23}],25:[function(_dereq_,module,exports){
"use strict";function clearAlpha(t){for(var h=t.length,i=3;h>i;i++)t[i]=255}var CanvasRender=function(){function t(t,h){this.canvas=h,this.px=t.data,this.width=t.width,this.height=t.height,this.channels=t.useAlpha?4:3,this.ctx=this.canvas.getContext("2d"),this.output=this.ctx.createImageData(this.canvas.width,this.canvas.height),clearAlpha(this.output.data),this.ctx.putImageData(this.output,0,0)}return t.prototype.resize=function(){(this.output.width!==this.canvas.width||this.output.height!==this.canvas.height)&&(this.output=this.ctx.createImageData(this.canvas.width,this.canvas.height),clearAlpha(this.output.data))},t.prototype.update=function(){for(var t=this.output.data,h=this.output.width,i=this.output.height,a=this.width/h,s=this.height/i,u=0;i>u;u++)for(var e=0;h>e;e++){var n=Math.floor(e*a),o=Math.floor(u*s),p=(n+o*this.width)*this.channels,c=4*(e+u*h);t[c]=this.px[p],t[c+1]=this.px[p+1],t[c+2]=this.px[p+2]}this.ctx.putImageData(this.output,0,0)},t.prototype.destruct=function(){this.px=null,this.ctx=null,this.canvas=null,this.output=null},t}();module.exports=CanvasRender;
},{}],26:[function(_dereq_,module,exports){
"use strict";function loadShader(t,e,r){var i=t.createShader(r);t.shaderSource(i,e),t.compileShader(i);var o=t.getShaderParameter(i,t.COMPILE_STATUS);if(!o)throw new Error('error compiling shader "'+i+'":'+t.getShaderInfoLog(i));return i}var vertexShaderSource=["attribute vec2 a_position;","attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","    gl_Position = vec4(a_position, 0, 1);","    v_texCoord = a_texCoord;","}"].join("\n"),fragmentShaderSource=["precision mediump float;","uniform sampler2D u_image;","varying vec2 v_texCoord;","void main() {","    gl_FragColor = texture2D(u_image, v_texCoord);","}"].join("\n"),WebGLRender=function(){function t(t,e){if(this.canvas=e,this.width=t.width,this.height=t.height,this.px=new Uint8Array(t.buffer),!window.WebGLRenderingContext)throw new Error("browser does not support WegGL");var r={alpha:!1},i=this.gl=this.canvas.getContext("webgl",r)||this.canvas.getContext("experimental-webgl",r);if(!i)throw new Error("could not create WebGL context");var o=i.createProgram();i.attachShader(o,loadShader(i,vertexShaderSource,i.VERTEX_SHADER)),i.attachShader(o,loadShader(i,fragmentShaderSource,i.FRAGMENT_SHADER)),i.linkProgram(o);var a=i.getProgramParameter(o,i.LINK_STATUS);if(!a)throw new Error("error in program linking:"+i.getProgramInfoLog(o));i.useProgram(o),this.positionLocation=i.getAttribLocation(o,"a_position"),this.texCoordLocation=i.getAttribLocation(o,"a_texCoord"),this.positionBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.positionBuffer),i.enableVertexAttribArray(this.positionLocation),i.vertexAttribPointer(this.positionLocation,2,i.FLOAT,!1,0,0),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),i.STATIC_DRAW),this.texCoordBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.texCoordBuffer),i.enableVertexAttribArray(this.texCoordLocation),i.vertexAttribPointer(this.texCoordLocation,2,i.FLOAT,!1,0,0),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,1,1,1,0,0,0,0,1,1,1,0]),i.STATIC_DRAW),this.texture=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.colorMask(!0,!0,!0,!1),i.viewport(0,0,this.canvas.width,this.canvas.height)}return t.prototype.resize=function(){this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT)},t.prototype.update=function(){this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGB,this.width,this.height,0,this.gl.RGB,this.gl.UNSIGNED_BYTE,this.px),this.gl.drawArrays(this.gl.TRIANGLES,0,6)},t.prototype.destruct=function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl=null,this.px=null,this.canvas=null},t}();module.exports=WebGLRender;
},{}]},{},[16])

(16)
});

//# sourceMappingURL=./dist/lorez.js.map